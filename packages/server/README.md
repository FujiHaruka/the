@the-/server
==========

<!---
This file is generated by @the-/templates. Do not update manually.
--->

<!-- Badge Start -->
<a name="badges"></a>

[![npm Version][bd_npm_shield_url]][bd_npm_url]

[bd_repo_url]: https://github.com/the-labo/the
[bd_npm_url]: http://www.npmjs.org/package/@the-/server
[bd_npm_shield_url]: http://img.shields.io/npm/v/@the-/server.svg?style=flat

<!-- Badge End -->


<!-- Description Start -->
<a name="description"></a>

HTTP/RPC Server of the-framework

<!-- Description End -->


<!-- Overview Start -->
<a name="overview"></a>




<!-- Overview End -->


<!-- Sections Start -->
<a name="sections"></a>

<!-- Section from "doc/readme/01.Installation.md.hbs" Start -->

<a name="section-doc-readme-01-installation-md"></a>

Installation
-----

```bash
$ npm install @the-/server --save
```


<!-- Section from "doc/readme/01.Installation.md.hbs" End -->

<!-- Section from "doc/readme/02.Usage.md.hbs" Start -->

<a name="section-doc-readme-02-usage-md"></a>

Usage
---------

```javascript
'use strict'

const React = require('react')
const theServer = require('@the-/server')

const { createElement: c } = React

;(async () => {
  // Define RPC Controller Class
  const FruitShopCtrl = ({ session }) => ({
    async addToCart(name, amount = 1) {
      const { cart = {} } = session
      cart[name] = (cart[name] || 0) + amount
      session.cart = cart
    },
    async buy() {
      const { cart = {} } = session
      console.log(cart)
      /* ... */
    },
  })

  // Define real time event handling stream
  const CountdownStream = ({ params }) => ({
    async *provide() {
      let count = params.count || 100
      while (count > 0) {
        yield { count }
        count--
      }
    },
  })

  const server = theServer({
    // Register controller with name
    // Controller instance will be created for each method call
    controllers: {
      fruitShop: FruitShopCtrl,
    },
    /**
     * View renderer
     * @param {*} children
     */
    html: ({ children }) => c('html', {}, c('body', {}, children)),
    /**
     * Redis config
     */
    redis: { db: 1, host: '127.0.0.1', port: '6379' },
    /**
     * Directory path to serve static files
     */
    static: 'public',
    streams: {
      countdown: CountdownStream,
    },
  })

  await server.listen(3000)
})().catch((e) => console.error(e))

```


<!-- Section from "doc/readme/02.Usage.md.hbs" End -->


<!-- Sections Start -->

<a name="api"></a>

## API Guide


- InfoFlusher~infoFlusher
  - [.flushInfo()](./doc/api/api.md#InfoFlusher~infoFlusher.flushInfo)
- global
  - [IOEvents()](./doc/api/api.md#IOEvents)
- module:@the-/server
  - [.adapters](./doc/api/api.md#module_@the-/server.adapters)
  - [.assert](./doc/api/api.md#module_@the-/server.assert)
  - [.buildInEndpoints](./doc/api/api.md#module_@the-/server.buildInEndpoints)
  - [.connectors](./doc/api/api.md#module_@the-/server.connectors)
  - [.constants](./doc/api/api.md#module_@the-/server.constants)
  - [.create(args)](./doc/api/api.md#module_@the-/server.create)
  - [.default()](./doc/api/api.md#module_@the-/server.default)
  - [.helpers](./doc/api/api.md#module_@the-/server.helpers)
  - [.stores](./doc/api/api.md#module_@the-/server.stores)
  - [.TheServer](./doc/api/api.md#module_@the-/server.TheServer)
- module:@the-/server.adapters
  - [.redisAdapter()](./doc/api/api.md#module_@the-/server.adapters.redisAdapter)
- module:@the-/server.assert
  - [.assertMethods(Class,reservedNames)](./doc/api/api.md#module_@the-/server.assert.assertMethods)
- module:@the-/server.connectors
  - [.IOConnector()](./doc/api/api.md#module_@the-/server.connectors.IOConnector)
- module:@the-/server.constants
  - [.DefaultValues](./doc/api/api.md#module_@the-/server.constants.DefaultValues)
- module:@the-/server.helpers
  - [.asStrictSession(session)](./doc/api/api.md#module_@the-/server.helpers.asStrictSession)
  - [.callbacksProxy()](./doc/api/api.md#module_@the-/server.helpers.callbacksProxy)
  - [.ClientAccess(config)](./doc/api/api.md#module_@the-/server.helpers.ClientAccess)
  - [.ctxInjector(creators)](./doc/api/api.md#module_@the-/server.helpers.ctxInjector)
  - [.InfoFlusher(filename,getter)](./doc/api/api.md#module_@the-/server.helpers.InfoFlusher)
  - [.langDetector(locales,options)](./doc/api/api.md#module_@the-/server.helpers.langDetector)
  - [.MetricsCounter()](./doc/api/api.md#module_@the-/server.helpers.MetricsCounter)
  - [.queryFromUrl()](./doc/api/api.md#module_@the-/server.helpers.queryFromUrl)
  - [.RPCKeeper(Class)](./doc/api/api.md#module_@the-/server.helpers.RPCKeeper)
  - [.serverRendering(Component,options)](./doc/api/api.md#module_@the-/server.helpers.serverRendering)
  - [.serverRendering()](./doc/api/api.md#module_@the-/server.helpers.serverRendering)
  - [.streamPool()](./doc/api/api.md#module_@the-/server.helpers.streamPool)
  - [.toControllerDriverFactory()](./doc/api/api.md#module_@the-/server.helpers.toControllerDriverFactory)
  - [.toLowerKeys()](./doc/api/api.md#module_@the-/server.helpers.toLowerKeys)
  - [~StreamDriverPool](./doc/api/api.md#module_@the-/server.helpers~StreamDriverPool)
- module:@the-/server.helpers.ClientAccess
  - [~clientAccess](./doc/api/api.md#module_@the-/server.helpers.ClientAccess~clientAccess)
- module:@the-/server.helpers.InfoFlusher
  - [~infoFlusher](./doc/api/api.md#module_@the-/server.helpers.InfoFlusher~infoFlusher)
- module:@the-/server.helpers.metricsMix
  - [~metricsCounter](./doc/api/api.md#module_@the-/server.helpers.metricsMix~metricsCounter)
- module:@the-/server.helpers.RPCKeeper
  - [~rpcKeeper](./doc/api/api.md#module_@the-/server.helpers.RPCKeeper~rpcKeeper)
- module:@the-/server.stores
  - [.ConnectionStore](./doc/api/api.md#module_@the-/server.stores.ConnectionStore)
  - [.SessionStore](./doc/api/api.md#module_@the-/server.stores.SessionStore)
  - [.Store](./doc/api/api.md#module_@the-/server.stores.Store)
- module:@the-/server.streaming
  - [.toStreamDriverFactory()](./doc/api/api.md#module_@the-/server.streaming.toStreamDriverFactory)
- SessionAccess~sessionAccess
  - [.reload()](./doc/api/api.md#SessionAccess~sessionAccess.reload)
  - [.save(options)](./doc/api/api.md#SessionAccess~sessionAccess.save)
- Store
  - [#cleanup()](./doc/api/api.md#Store#cleanup)
  - [#del(id)](./doc/api/api.md#Store#del)
  - [#delAll()](./doc/api/api.md#Store#delAll)
  - [#get(id)](./doc/api/api.md#Store#get)
  - [#has(id)](./doc/api/api.md#Store#has)
  - [#ids()](./doc/api/api.md#Store#ids)
  - [#set(id,data)](./doc/api/api.md#Store#set)
- TheServer
  - [#close(args)](./doc/api/api.md#TheServer#close)
  - [#destroyAllSessions()](./doc/api/api.md#TheServer#destroyAllSessions)
  - [#info()](./doc/api/api.md#TheServer#info)
  - [#listen(port)](./doc/api/api.md#TheServer#listen)

See [API Guide](./doc/api/api.md) for more detail


<!-- LICENSE Start -->
<a name="license"></a>

License
-------
This software is released under the [MIT License](https://github.com/the-labo/the/blob/master/LICENSE).

<!-- LICENSE End -->


<!-- Links Start -->
<a name="links"></a>

Links
------

+ [THE Labo][the_labo_url]

[the_labo_url]: https://github.com/the-labo

<!-- Links End -->
