@the-/server
==========

<!---
This file is generated by @the-/templates. Do not update manually.
--->

<!-- Badge Start -->
<a name="badges"></a>

[![npm Version][bd_npm_shield_url]][bd_npm_url]

[bd_repo_url]: https://github.com/the-labo/the
[bd_npm_url]: http://www.npmjs.org/package/@the-/server
[bd_npm_shield_url]: http://img.shields.io/npm/v/@the-/server.svg?style=flat

<!-- Badge End -->


<!-- Description Start -->
<a name="description"></a>

HTTP/RPC Server of the-framework

<!-- Description End -->


<!-- Overview Start -->
<a name="overview"></a>




<!-- Overview End -->


<!-- Sections Start -->
<a name="sections"></a>

<!-- Section from "doc/readme/01.Installation.md.hbs" Start -->

<a name="section-doc-readme-01-installation-md"></a>

Installation
-----

```bash
$ npm install @the-/server --save
```


<!-- Section from "doc/readme/01.Installation.md.hbs" End -->

<!-- Section from "doc/readme/02.Usage.md.hbs" Start -->

<a name="section-doc-readme-02-usage-md"></a>

Usage
---------

```javascript
'use strict'
const React = require('react')
const theServer = require('@the-/server')
const { Ctrl, Stream } = theServer
const { createElement: c } = React

;(async () => {
  // Define RPC Controller Class
  class FruitShopCtrl extends Ctrl {
    async addToCart(name, amount = 1) {
      const { session } = this
      const { cart = {} } = session
      cart[name] = (cart[name] || 0) + amount
      session.cart = cart
    }

    async buy() {
      const { session } = this
      const { cart = {} } = session
      console.log(cart)
      /* ... */
    }
  }

  // Define real time event handling stream
  class CountdownStream extends Stream {
    async *provide() {
      this.count = this.params.count || 100
      while (this.count > 0) {
        yield { count: this.count }
        this.count--
      }
    }
  }

  const server = theServer({
    // Register controller with name
    // Controller instance will be created for each method call
    controllers: {
      fruitShop: FruitShopCtrl,
    },
    /**
     * View renderer
     * @param {*} children
     */
    html: ({ children }) => c('html', {}, c('body', {}, children)),
    /**
     * Redis config
     */
    redis: { db: 1, host: '127.0.0.1', port: '6379' },
    /**
     * Directory path to serve static files
     */
    static: 'public',

    streams: {
      countdown: CountdownStream,
    },
  })

  await server.listen(3000)
})().catch((e) => console.error(e))

```


<!-- Section from "doc/readme/02.Usage.md.hbs" End -->


<!-- Sections Start -->

<a name="api"></a>

## API Guide


- ControllerModuleBind
  - [#reloadSession(options)](./doc/api/api.md#ControllerModuleBind#reloadSession)
  - [#saveSession(options)](./doc/api/api.md#ControllerModuleBind#saveSession)
- global
  - [IOEvents()](./doc/api/api.md#IOEvents)
  - [KeepMixed](./doc/api/api.md#KeepMixed)
- module:@the-/server
  - [.adapters](./doc/api/api.md#module_@the-/server.adapters)
  - [.asControllerModule()](./doc/api/api.md#module_@the-/server.asControllerModule)
  - [.assert](./doc/api/api.md#module_@the-/server.assert)
  - [.buildInEndpoints](./doc/api/api.md#module_@the-/server.buildInEndpoints)
  - [.constants](./doc/api/api.md#module_@the-/server.constants)
  - [.create(args)](./doc/api/api.md#module_@the-/server.create)
  - [.default()](./doc/api/api.md#module_@the-/server.default)
  - [.helpers](./doc/api/api.md#module_@the-/server.helpers)
  - [.mixins](./doc/api/api.md#module_@the-/server.mixins)
  - [.stores](./doc/api/api.md#module_@the-/server.stores)
  - [.TheServer](./doc/api/api.md#module_@the-/server.TheServer)
- module:@the-/server.adapters
  - [.redisAdapter()](./doc/api/api.md#module_@the-/server.adapters.redisAdapter)
- module:@the-/server.assert
  - [.assertMethods(Class,reservedNames)](./doc/api/api.md#module_@the-/server.assert.assertMethods)
- module:@the-/server.constants
  - [.DefaultValues](./doc/api/api.md#module_@the-/server.constants.DefaultValues)
- module:@the-/server.helpers
  - [.asStrictSession(session)](./doc/api/api.md#module_@the-/server.helpers.asStrictSession)
  - [.callbacksProxy()](./doc/api/api.md#module_@the-/server.helpers.callbacksProxy)
  - [.controllerSpecsFor()](./doc/api/api.md#module_@the-/server.helpers.controllerSpecsFor)
  - [.ctxInjector(creators)](./doc/api/api.md#module_@the-/server.helpers.ctxInjector)
  - [.langDetector(locales,options)](./doc/api/api.md#module_@the-/server.helpers.langDetector)
  - [.queryFromUrl()](./doc/api/api.md#module_@the-/server.helpers.queryFromUrl)
  - [.serverRendering(Component,options)](./doc/api/api.md#module_@the-/server.helpers.serverRendering)
  - [.serverRendering()](./doc/api/api.md#module_@the-/server.helpers.serverRendering)
  - [.streamPool()](./doc/api/api.md#module_@the-/server.helpers.streamPool)
  - [.toControllerModuleBind()](./doc/api/api.md#module_@the-/server.helpers.toControllerModuleBind)
  - [.toLowerKeys()](./doc/api/api.md#module_@the-/server.helpers.toLowerKeys)
  - [~StreamPool](./doc/api/api.md#module_@the-/server.helpers~StreamPool)
- module:@the-/server.mixins
  - [.clientMix(Class)](./doc/api/api.md#module_@the-/server.mixins.clientMix)
  - [.infoMix(Class)](./doc/api/api.md#module_@the-/server.mixins.infoMix)
  - [.ioMix(Class)](./doc/api/api.md#module_@the-/server.mixins.ioMix)
  - [.keepMix(Class)](./doc/api/api.md#module_@the-/server.mixins.keepMix)
  - [.metricsMix(Class)](./doc/api/api.md#module_@the-/server.mixins.metricsMix)
- module:@the-/server.mixins.clientMix
  - [~ClientMixed](./doc/api/api.md#module_@the-/server.mixins.clientMix~ClientMixed)
- module:@the-/server.mixins.infoMix
  - [~InfoMixed](./doc/api/api.md#module_@the-/server.mixins.infoMix~InfoMixed)
- module:@the-/server.mixins.infoMix~InfoMixed
  - [#flushInfo()](./doc/api/api.md#module_@the-/server.mixins.infoMix~InfoMixed#flushInfo)
  - [#info()](./doc/api/api.md#module_@the-/server.mixins.infoMix~InfoMixed#info)
- module:@the-/server.mixins.ioMix
  - [~IOMixed](./doc/api/api.md#module_@the-/server.mixins.ioMix~IOMixed)
- module:@the-/server.mixins.metricsMix
  - [~MetricsMix](./doc/api/api.md#module_@the-/server.mixins.metricsMix~MetricsMix)
- module:@the-/server.stores
  - [.ConnectionStore](./doc/api/api.md#module_@the-/server.stores.ConnectionStore)
  - [.SessionStore](./doc/api/api.md#module_@the-/server.stores.SessionStore)
  - [.Store](./doc/api/api.md#module_@the-/server.stores.Store)
- module:@the-/server.stores.ConnectionStore
  - [#cleanup()](./doc/api/api.md#module_@the-/server.stores.ConnectionStore#cleanup)
  - [#del(id)](./doc/api/api.md#module_@the-/server.stores.ConnectionStore#del)
  - [#delAll()](./doc/api/api.md#module_@the-/server.stores.ConnectionStore#delAll)
  - [#get(id)](./doc/api/api.md#module_@the-/server.stores.ConnectionStore#get)
  - [#has(id)](./doc/api/api.md#module_@the-/server.stores.ConnectionStore#has)
  - [#ids()](./doc/api/api.md#module_@the-/server.stores.ConnectionStore#ids)
  - [#set(id,data)](./doc/api/api.md#module_@the-/server.stores.ConnectionStore#set)
- module:@the-/server.stores.Store
  - [#cleanup()](./doc/api/api.md#module_@the-/server.stores.Store#cleanup)
  - [#del(id)](./doc/api/api.md#module_@the-/server.stores.Store#del)
  - [#delAll()](./doc/api/api.md#module_@the-/server.stores.Store#delAll)
  - [#get(id)](./doc/api/api.md#module_@the-/server.stores.Store#get)
  - [#has(id)](./doc/api/api.md#module_@the-/server.stores.Store#has)
  - [#ids()](./doc/api/api.md#module_@the-/server.stores.Store#ids)
  - [#set(id,data)](./doc/api/api.md#module_@the-/server.stores.Store#set)
- module:@the-/server.TheServer
  - [#close(args)](./doc/api/api.md#module_@the-/server.TheServer#close)
  - [#destroyAllSessions()](./doc/api/api.md#module_@the-/server.TheServer#destroyAllSessions)
  - [#handleIOClientCame()](./doc/api/api.md#module_@the-/server.TheServer#handleIOClientCame)
  - [#handleIOClientGone()](./doc/api/api.md#module_@the-/server.TheServer#handleIOClientGone)
  - [#handleIORPCAbort()](./doc/api/api.md#module_@the-/server.TheServer#handleIORPCAbort)
  - [#handleIORPCCall()](./doc/api/api.md#module_@the-/server.TheServer#handleIORPCCall)
  - [#handleIOStreamChunk()](./doc/api/api.md#module_@the-/server.TheServer#handleIOStreamChunk)
  - [#handleIOStreamClose()](./doc/api/api.md#module_@the-/server.TheServer#handleIOStreamClose)
  - [#handleIOStreamFin()](./doc/api/api.md#module_@the-/server.TheServer#handleIOStreamFin)
  - [#handleIOStreamOpen()](./doc/api/api.md#module_@the-/server.TheServer#handleIOStreamOpen)
  - [#listen(port)](./doc/api/api.md#module_@the-/server.TheServer#listen)

See [API Guide](./doc/api/api.md) for more detail


<!-- LICENSE Start -->
<a name="license"></a>

License
-------
This software is released under the [MIT License](https://github.com/the-labo/the/blob/master/LICENSE).

<!-- LICENSE End -->


<!-- Links Start -->
<a name="links"></a>

Links
------

+ [THE Labo][the_labo_url]

[the_labo_url]: https://github.com/the-labo

<!-- Links End -->
