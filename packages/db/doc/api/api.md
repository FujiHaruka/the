<!--- Code generated by @the-/script-doc. DO NOT EDIT. -->

## Modules

<dl>
<dt><a href="#module_default">default</a></dt>
<dd><p>Default exports</p>
</dd>
<dt><a href="#module_@the-/db">@the-/db</a></dt>
<dd><p>DB for the-framework</p>
</dd>
<dt><a href="#module_helpers">helpers</a></dt>
<dd><p>Helper functions</p>
</dd>
<dt><a href="#module_mixins">mixins</a></dt>
<dd><p>Mixins</p>
</dd>
<dt><a href="#module_resources">resources</a></dt>
<dd><p>Buildin resources</p>
</dd>
</dl>

## Classes

<dl>
<dt><a href="#TheDB">TheDB</a> ⇐ <code><a href="#ResourceMixed">ResourceMixed</a></code></dt>
<dd></dd>
<dt><a href="#CliMix">CliMix</a></dt>
<dd></dd>
<dt><a href="#ExportImportMixed">ExportImportMixed</a></dt>
<dd></dd>
<dt><a href="#MigrateMixed">MigrateMixed</a></dt>
<dd></dd>
<dt><a href="#ResourceMixed">ResourceMixed</a></dt>
<dd></dd>
<dt><a href="#TheLogResource">TheLogResource</a></dt>
<dd></dd>
<dt><a href="#TheSchemaResource">TheSchemaResource</a></dt>
<dd></dd>
</dl>

## Functions

<dl>
<dt><a href="#create">create(...args)</a> ⇒ <code><a href="#TheDB">TheDB</a></code></dt>
<dd><p>Create a TheDB instance</p>
</dd>
<dt><a href="#driverFromEnv">driverFromEnv()</a></dt>
<dd><p>Create driver from env</p>
</dd>
<dt><a href="#execForEnv">execForEnv()</a></dt>
<dd><p>Do exec for env</p>
</dd>
<dt><a href="#setupForEnv">setupForEnv()</a></dt>
<dd><p>Do setup for env</p>
</dd>
<dt><a href="#createTerminal">createTerminal()</a></dt>
<dd></dd>
<dt><a href="#execMysql">execMysql()</a></dt>
<dd></dd>
<dt><a href="#execSqlite">execSqlite()</a></dt>
<dd></dd>
<dt><a href="#parsePolicy">parsePolicy()</a></dt>
<dd><p>Parse db policy</p>
</dd>
<dt><a href="#parseSchema">parseSchema(Schema, [options])</a></dt>
<dd><p>Parse schema</p>
</dd>
<dt><a href="#cascadeMix">cascadeMix(Class)</a> ⇒ <code>function</code></dt>
<dd></dd>
<dt><a href="#cliMix">cliMix()</a></dt>
<dd><p>Add cli methods</p>
</dd>
<dt><a href="#exportImportMix">exportImportMix()</a> ⇒ <code>function</code></dt>
<dd><p>Add export/import methods</p>
</dd>
<dt><a href="#migrateMix">migrateMix()</a> ⇒ <code>function</code></dt>
<dd><p>Add migrate methods</p>
</dd>
<dt><a href="#refreshMix">refreshMix(Class)</a> ⇒ <code>function</code></dt>
<dd></dd>
<dt><a href="#resourceMix">resourceMix()</a></dt>
<dd></dd>
<dt><a href="#setupMongo">setupMongo(config)</a></dt>
<dd></dd>
<dt><a href="#setupMysql">setupMysql()</a></dt>
<dd></dd>
<dt><a href="#setupPostgres">setupPostgres()</a></dt>
<dd></dd>
<dt><a href="#setupSqlite">setupSqlite()</a></dt>
<dd></dd>
</dl>

<a name="module_default"></a>

## default
Default exports

<a name="module_@the-/db"></a>

## @the-/db
DB for the-framework

<a name="module_helpers"></a>

## helpers
Helper functions

<a name="module_mixins"></a>

## mixins
Mixins

<a name="module_resources"></a>

## resources
Buildin resources

<a name="TheDB"></a>

## TheDB ⇐ [<code>ResourceMixed</code>](#ResourceMixed)
**Kind**: global class  
**Extends**: [<code>ResourceMixed</code>](#ResourceMixed), [<code>ExportImportMixed</code>](#ExportImportMixed), [<code>MigrateMixed</code>](#MigrateMixed), <code>RefreshMixed</code>, <code>CliMixed</code>  

* [TheDB](#TheDB) ⇐ [<code>ResourceMixed</code>](#ResourceMixed)
    * [new TheDB(config)](#new_TheDB_new)
    * [.hooksFromMapping(HookMapping)](#TheDB+hooksFromMapping)
    * [.load(ResourceClass, resourceName)](#TheDB+load) ⇒ <code>ClayResource</code>
    * [.loadFromMapping(ResourceMapping)](#TheDB+loadFromMapping)
    * [.pluginFromMapping(PluginMapping)](#TheDB+pluginFromMapping)
    * [.unref()](#TheDB+unref) ⇒ [<code>TheDB</code>](#TheDB)
    * [.drop()](#TheDB+drop) ⇒ <code>Promise.&lt;void&gt;</code>
    * [.invalidate(entityRef)](#TheDB+invalidate) ⇒ <code>Promise.&lt;void&gt;</code>
    * [.transaction(callback)](#TheDB+transaction) ⇒ <code>Promise.&lt;\*&gt;</code>
    * [.updateVersion(version)](#TheDB+updateVersion) ⇒ <code>Promise.boolean</code>
    * [.assertResource(resourceName)](#ResourceMixed+assertResource)
    * [.getResource(resourceName)](#ResourceMixed+getResource) ⇒ <code>TheResource</code>
    * [.hasResource(resourceName)](#ResourceMixed+hasResource) ⇒ <code>boolean</code>
    * [.migrate(handlers)](#MigrateMixed+migrate) ⇒ <code>Promise.&lt;?Object&gt;</code>
    * [.requestToRefresh(entityRef)](#RefreshMixed+requestToRefresh)
    * [.startRefreshLoop(interval)](#RefreshMixed+startRefreshLoop)
    * [.stopRefreshLoop()](#RefreshMixed+stopRefreshLoop)
    * [.waitToRefresh(entityRef, [options])](#RefreshMixed+waitToRefresh) ⇒ <code>Promise.&lt;Boolean&gt;</code>

<a name="new_TheDB_new"></a>

### new TheDB(config)

| Param | Type | Default | Description |
| --- | --- | --- | --- |
| config | <code>Object</code> |  |  |
| [config.name] | <code>string</code> | <code>&quot;uuid.v4()&quot;</code> | Name of clay-lump |
| [config.dialect] | <code>string</code> | <code>&quot;&#x27;memory&#x27;&quot;</code> | Database dialect. "mysql", "json", "memory", "localstorage", or "sqlite" |
| [config.storage] | <code>string</code> |  | Storage file name for "sqlite" or "json" dialect |
| [config.database] | <code>string</code> |  | Name of database schema |
| [config.username] | <code>string</code> |  | Database username |
| [config.password] | <code>string</code> |  | Database password |
| [config.host] | <code>string</code> |  | Database password |
| [config.port] | <code>string</code> |  | Database password |
| [config.plugins] | <code>object</code> |  | Database plugin creators |
| [config.hooks] | <code>object</code> |  | Database hook creators |
| [config.resources] | <code>object</code> |  | Database resource classes |

<a name="TheDB+hooksFromMapping"></a>

### theDB.hooksFromMapping(HookMapping)
Register hooks from mapping

**Kind**: instance method of [<code>TheDB</code>](#TheDB)  

| Param | Type |
| --- | --- |
| HookMapping | <code>Object</code> | 

<a name="TheDB+load"></a>

### theDB.load(ResourceClass, resourceName) ⇒ <code>ClayResource</code>
Register resource form Resource Class

**Kind**: instance method of [<code>TheDB</code>](#TheDB)  
**Returns**: <code>ClayResource</code> - Loaded resource class  

| Param | Type | Description |
| --- | --- | --- |
| ResourceClass | <code>function</code> | Resource class to register |
| resourceName | <code>string</code> | Name of resource |

<a name="TheDB+loadFromMapping"></a>

### theDB.loadFromMapping(ResourceMapping)
Load resources from mapping object

**Kind**: instance method of [<code>TheDB</code>](#TheDB)  

| Param | Type | Description |
| --- | --- | --- |
| ResourceMapping | <code>Object.&lt;string, function()&gt;</code> | Resource name and class |

<a name="TheDB+pluginFromMapping"></a>

### theDB.pluginFromMapping(PluginMapping)
Register plugins from mapping

**Kind**: instance method of [<code>TheDB</code>](#TheDB)  

| Param | Type |
| --- | --- |
| PluginMapping | <code>Object</code> | 

<a name="TheDB+unref"></a>

### theDB.unref() ⇒ [<code>TheDB</code>](#TheDB)
Aut close before exit

**Kind**: instance method of [<code>TheDB</code>](#TheDB)  
**Returns**: [<code>TheDB</code>](#TheDB) - this  
<a name="TheDB+drop"></a>

### theDB.drop() ⇒ <code>Promise.&lt;void&gt;</code>
Drop database

**Kind**: instance method of [<code>TheDB</code>](#TheDB)  
<a name="TheDB+invalidate"></a>

### theDB.invalidate(entityRef) ⇒ <code>Promise.&lt;void&gt;</code>
Invalidate entity

**Kind**: instance method of [<code>TheDB</code>](#TheDB)  

| Param | Type |
| --- | --- |
| entityRef | <code>string</code> | 

<a name="TheDB+transaction"></a>

### theDB.transaction(callback) ⇒ <code>Promise.&lt;\*&gt;</code>
Create transaction

**Kind**: instance method of [<code>TheDB</code>](#TheDB)  

| Param | Type |
| --- | --- |
| callback | <code>function</code> | 

<a name="TheDB+updateVersion"></a>

### theDB.updateVersion(version) ⇒ <code>Promise.boolean</code>
Update database migration version

**Kind**: instance method of [<code>TheDB</code>](#TheDB)  
**Returns**: <code>Promise.boolean</code> - Success or not  

| Param | Type | Description |
| --- | --- | --- |
| version | <code>string</code> | Version string |

<a name="ResourceMixed+assertResource"></a>

### theDB.assertResource(resourceName)
Check if resource exists

**Kind**: instance method of [<code>TheDB</code>](#TheDB)  
**Throws**:

- <code>Error</code> Resource not found error


| Param | Type |
| --- | --- |
| resourceName | <code>string</code> | 

<a name="ResourceMixed+getResource"></a>

### theDB.getResource(resourceName) ⇒ <code>TheResource</code>
Get resource with name

**Kind**: instance method of [<code>TheDB</code>](#TheDB)  

| Param | Type |
| --- | --- |
| resourceName | <code>string</code> | 

<a name="ResourceMixed+hasResource"></a>

### theDB.hasResource(resourceName) ⇒ <code>boolean</code>
Check if resource exists

**Kind**: instance method of [<code>TheDB</code>](#TheDB)  

| Param | Type |
| --- | --- |
| resourceName | <code>string</code> | 

<a name="MigrateMixed+migrate"></a>

### theDB.migrate(handlers) ⇒ <code>Promise.&lt;?Object&gt;</code>
Run database migration

**Kind**: instance method of [<code>TheDB</code>](#TheDB)  
**Returns**: <code>Promise.&lt;?Object&gt;</code> - Migration result  

| Param | Type | Description |
| --- | --- | --- |
| handlers | <code>Object.&lt;string, function()&gt;</code> | Migration handler for each versions |

<a name="RefreshMixed+requestToRefresh"></a>

### theDB.requestToRefresh(entityRef)
Request to refresh entity

**Kind**: instance method of [<code>TheDB</code>](#TheDB)  

| Param | Type |
| --- | --- |
| entityRef | <code>string</code> | 

<a name="RefreshMixed+startRefreshLoop"></a>

### theDB.startRefreshLoop(interval)
Start refreshing loop

**Kind**: instance method of [<code>TheDB</code>](#TheDB)  

| Param | Type |
| --- | --- |
| interval | <code>number</code> | 

<a name="RefreshMixed+stopRefreshLoop"></a>

### theDB.stopRefreshLoop()
Stop refreshing loop

**Kind**: instance method of [<code>TheDB</code>](#TheDB)  
<a name="RefreshMixed+waitToRefresh"></a>

### theDB.waitToRefresh(entityRef, [options]) ⇒ <code>Promise.&lt;Boolean&gt;</code>
Wait until refresh

**Kind**: instance method of [<code>TheDB</code>](#TheDB)  
**Returns**: <code>Promise.&lt;Boolean&gt;</code> - - Full filled  

| Param | Type | Default | Description |
| --- | --- | --- | --- |
| entityRef | <code>string</code> |  |  |
| [options] | <code>Object</code> | <code>{}</code> | Optional settings |

<a name="CliMix"></a>

## CliMix
**Kind**: global class  
<a name="ExportImportMixed"></a>

## ExportImportMixed
**Kind**: global class  
<a name="MigrateMixed"></a>

## MigrateMixed
**Kind**: global class  
<a name="MigrateMixed+migrate"></a>

### migrateMixed.migrate(handlers) ⇒ <code>Promise.&lt;?Object&gt;</code>
Run database migration

**Kind**: instance method of [<code>MigrateMixed</code>](#MigrateMixed)  
**Returns**: <code>Promise.&lt;?Object&gt;</code> - Migration result  

| Param | Type | Description |
| --- | --- | --- |
| handlers | <code>Object.&lt;string, function()&gt;</code> | Migration handler for each versions |

<a name="ResourceMixed"></a>

## ResourceMixed
**Kind**: global class  

* [ResourceMixed](#ResourceMixed)
    * [.assertResource(resourceName)](#ResourceMixed+assertResource)
    * [.getResource(resourceName)](#ResourceMixed+getResource) ⇒ <code>TheResource</code>
    * [.hasResource(resourceName)](#ResourceMixed+hasResource) ⇒ <code>boolean</code>

<a name="ResourceMixed+assertResource"></a>

### resourceMixed.assertResource(resourceName)
Check if resource exists

**Kind**: instance method of [<code>ResourceMixed</code>](#ResourceMixed)  
**Throws**:

- <code>Error</code> Resource not found error


| Param | Type |
| --- | --- |
| resourceName | <code>string</code> | 

<a name="ResourceMixed+getResource"></a>

### resourceMixed.getResource(resourceName) ⇒ <code>TheResource</code>
Get resource with name

**Kind**: instance method of [<code>ResourceMixed</code>](#ResourceMixed)  

| Param | Type |
| --- | --- |
| resourceName | <code>string</code> | 

<a name="ResourceMixed+hasResource"></a>

### resourceMixed.hasResource(resourceName) ⇒ <code>boolean</code>
Check if resource exists

**Kind**: instance method of [<code>ResourceMixed</code>](#ResourceMixed)  

| Param | Type |
| --- | --- |
| resourceName | <code>string</code> | 

<a name="TheLogResource"></a>

## TheLogResource
**Kind**: global class  
<a name="new_TheLogResource_new"></a>

### new TheLogResource()
Resource of data history

<a name="TheSchemaResource"></a>

## TheSchemaResource
**Kind**: global class  
<a name="new_TheSchemaResource_new"></a>

### new TheSchemaResource()
Resource to manage schema

<a name="create"></a>

## create(...args) ⇒ [<code>TheDB</code>](#TheDB)
Create a TheDB instance

**Kind**: global function  

| Param | Type |
| --- | --- |
| ...args | <code>\*</code> | 

<a name="driverFromEnv"></a>

## driverFromEnv()
Create driver from env

**Kind**: global function  
<a name="execForEnv"></a>

## execForEnv()
Do exec for env

**Kind**: global function  
<a name="setupForEnv"></a>

## setupForEnv()
Do setup for env

**Kind**: global function  
<a name="createTerminal"></a>

## createTerminal()
**Kind**: global function  
<a name="execMysql"></a>

## execMysql()
**Kind**: global function  
<a name="execSqlite"></a>

## execSqlite()
**Kind**: global function  
<a name="parsePolicy"></a>

## parsePolicy()
Parse db policy

**Kind**: global function  
<a name="parseSchema"></a>

## parseSchema(Schema, [options])
Parse schema

**Kind**: global function  

| Param | Type | Default |
| --- | --- | --- |
| Schema | <code>Object</code> |  | 
| [options] | <code>Object</code> | <code>{}</code> | 

<a name="cascadeMix"></a>

## cascadeMix(Class) ⇒ <code>function</code>
**Kind**: global function  
**Returns**: <code>function</code> - Mixed Class  

| Param | Type |
| --- | --- |
| Class | <code>function</code> | 

<a name="cliMix"></a>

## cliMix()
Add cli methods

**Kind**: global function  
<a name="exportImportMix"></a>

## exportImportMix() ⇒ <code>function</code>
Add export/import methods

**Kind**: global function  

| Type |
| --- |
| <code>function</code> | 

<a name="migrateMix"></a>

## migrateMix() ⇒ <code>function</code>
Add migrate methods

**Kind**: global function  

| Type |
| --- |
| <code>function</code> | 

<a name="refreshMix"></a>

## refreshMix(Class) ⇒ <code>function</code>
**Kind**: global function  
**Returns**: <code>function</code> - Mixed Class  

| Param | Type |
| --- | --- |
| Class | <code>function</code> | 

<a name="resourceMix"></a>

## resourceMix()
**Kind**: global function  
<a name="setupMongo"></a>

## setupMongo(config)
**Kind**: global function  

| Param | Type |
| --- | --- |
| config | <code>Object</code> | 

<a name="setupMysql"></a>

## setupMysql()
**Kind**: global function  
<a name="setupPostgres"></a>

## setupPostgres()
**Kind**: global function  
<a name="setupSqlite"></a>

## setupSqlite()
**Kind**: global function  
